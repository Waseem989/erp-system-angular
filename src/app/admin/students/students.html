<div class="container">
  <h2>Students</h2>
  <button (click)="openForm()">+ Add Student</button>

  <input type="text" placeholder="Search..." [(ngModel)]="searchText" (input)="searchStudent()">

  <table *ngIf="filteredStudents.length">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Father</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Class</th>
        <th>Roll</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of filteredStudents">
        <td>{{ s.id }}</td>
        <td>{{ s.name }}</td>
        <td>{{ s.father_name }}</td>
        <td>{{ s.phone_number }}</td>
        <td>{{ s.email }}</td>
        <td>{{ s.class }}</td>
        <td>{{ s.roll_number }}</td>
        <td>
          <button (click)="openForm(s)">Edit</button>
          <button (click)="deleteStudent(s.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="popup" *ngIf="showForm">
    <div class="popup-content">
      <form (ngSubmit)="saveStudent()">
        <input type="text" [(ngModel)]="formData.name" name="name" placeholder="Name" required>
        <input type="text" [(ngModel)]="formData.father_name" name="father_name" placeholder="Father Name" required>
        <input type="text" [(ngModel)]="formData.phone_number" name="phone_number" placeholder="Phone" required>
        <input type="email" [(ngModel)]="formData.email" name="email" placeholder="Email" required>
        <input type="text" [(ngModel)]="formData.address" name="address" placeholder="Address" required>
        <input type="text" [(ngModel)]="formData.class" name="class" placeholder="Class" required>
        <input type="text" [(ngModel)]="formData.section" name="section" placeholder="Section" required>
        <input type="text" [(ngModel)]="formData.roll_number" name="roll_number" placeholder="Roll Number" required>
        <input type="text" [(ngModel)]="formData.profile_pic" name="profile_pic" placeholder="Profile Pic">
        <input type="password" [(ngModel)]="formData.password" name="password" placeholder="Password" [required]="!editingId">

        <button type="submit">Save</button>
        <button type="button" (click)="closeForm()">Cancel</button>
      </form>
    </div>
  </div>
</div>
