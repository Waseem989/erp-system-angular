<div class="container">
  <h2>Teacher Enrollment</h2>

  <!-- Enroll Button + Search -->
  
  <div class="header-row">
    <button class="enroll-btn" (click)="openForm()">+ Enroll teacher</button>
    <div class="search-box">
      <input type="text" placeholder="Search by Roll No, Name, Email, Phone, Class or Section"
             [(ngModel)]="searchTerm" (click)="searchTeachers()">
      <button (click)="searchTeachers()">Search</button>
    </div>
  </div>


  <!-- Table -->
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Teacher Name</th>
        <th>Father Name</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Address</th>
        <th>Subject</th>
        <th>Class</th>
        <th>Profile Pic</th>
        <th>Password</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let teacher of filteredTeachers; let i = index">
        <td>{{ teacher.id }}</td>
        <td>{{ teacher.teacherNane }}</td>
        <td>{{ teacher.fatherName }}</td>
        <td>{{ teacher.phone }}</td>
        <td>{{ teacher.email }}</td>
        <td>{{ teacher.address }}</td>
        <td>{{ teacher.subject }}</td>
        <td>{{ teacher.class }}</td>
        <td>
          <img [src]="teacher.profilePic" alt="Profile" width="50" height="50">
        </td>
        <td>{{ teacher.password }}</td>
        <td>
          <button class="update-btn" (click)="editTeacher(teacher)">Update</button>
          <button class="delete-btn" (click)="deleteTeacher(teacher.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Popup Form -->
<div class="popup" [class.show]="showForm">
  <div class="popup-content">
    <h3>{{ editIndex !== null ? 'Update teacher' : 'Enroll teacher' }}</h3>
    <form (ngSubmit)="onSubmit()">
      <input type="text" [(ngModel)]="formData.teacherNane" name="nane" placeholder="Teacher Name" required>
      <input type="text" [(ngModel)]="formData.fatherName" name="fatherName" placeholder="Father Name" required>
      <input type="number" [(ngModel)]="formData.phone" name="phone" placeholder="Phone" required>
      <input type="email" [(ngModel)]="formData.email" name="email" placeholder="Email" required>
      <input type="text" [(ngModel)]="formData.address" name="address" placeholder="Address" required>
      <input type="text" [(ngModel)]="formData.subject" name="subject" placeholder="Subjects" required>
      <input type="text" [(ngModel)]="formData.class" name="class" placeholder="Class" required>
      <input type="text" [(ngModel)]="formData.profilePic" name="profilePic" placeholder="Profile Pic URL">
      <input type="text" [(ngModel)]="formData.password" name="password" placeholder="Password" required>
      <div class="form-actions">
        <button type="submit">{{ editIndex !== null ? 'Update' : 'Enroll' }}</button>
        <button type="button" (click)="closeForm()">Cancel</button>
      </div>
    </form>
  </div>
</div>
